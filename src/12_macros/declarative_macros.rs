//! # Declarative Macros Examples - ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÅ‡∏ö‡∏ö Spell Casting! üîÆ‚ú®
//!
//! ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô `macro_rules`! ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á declarative macros
//! ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏≤‡∏ñ‡∏≤‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ã‡πâ‡∏≥‡πÑ‡∏î‡πâ! ü™Ñüìú
//!
//! üéØ **‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢**: ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏ã‡πâ‡∏≥!

/// ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á declarative macros ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô - ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÅ‡∏ö‡∏ö Basic Spells! üîÆ
pub fn declarative_macros_examples() {
    println!("üîÆ‚ú® === ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Declarative Macros - ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®! === ‚ú®üîÆ");
    println!("ü™Ñ ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≤‡∏ñ‡∏≤‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏î‡πâ‡∏ß‡∏¢ macro_rules! üìú");

    // üé≠ Macro ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á function ‡∏á‡πà‡∏≤‡∏¢‡πÜ - ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ú‡∏µ Function! üëª
    macro_rules! create_function {
        ($func_name:ident) => {
            fn $func_name() {
                println!("üé™ ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå: {} ü™Ñ", stringify!($func_name));
            }
        };
    }

    // ü™Ñ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢ macro - ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ú‡∏µ‡∏°‡∏≤‡∏ä‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô! üëª‚ú®
    create_function!(hello);    // üëã ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢
    create_function!(goodbye);  // üëã ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô

    println!("\nüé≠ === ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô! === üé≠");
    hello();    // üé™ ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢!
    goodbye();  // üé™ ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô!

    // üßÆ Macro ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì - ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏ô‡∏±‡∏Å‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå! üî¢‚ú®
    macro_rules! calculate {
        ($x:expr, +, $y:expr) => {
            $x + $y  // ‚ûï ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏ö‡∏ß‡∏Å!
        };
        ($x:expr, -, $y:expr) => {
            $x - $y  // ‚ûñ ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏•‡∏ö!
        };
        ($x:expr, *, $y:expr) => {
            $x * $y  // ‚úñÔ∏è ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏Ñ‡∏π‡∏ì!
        };
        ($x:expr, /, $y:expr) => {
            $x / $y  // ‚ûó ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏´‡∏≤‡∏£!
        };
    }

    println!("\nüßÆüî¢ === ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå === üî¢üßÆ");
    println!("   ‚ûï 5 + 3 = {} (‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏ö‡∏ß‡∏Å!)", calculate!(5, +, 3));
    println!("   ‚ûñ 10 - 4 = {} (‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏•‡∏ö!)", calculate!(10, -, 4));
    println!("   ‚úñÔ∏è 6 * 7 = {} (‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏Ñ‡∏π‡∏ì!)", calculate!(6, *, 7));
    println!("   ‚ûó 15 / 3 = {} (‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏´‡∏≤‡∏£!)", calculate!(15, /, 3));
}

/// ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á macro ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö arguments ‡∏´‡∏•‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö - ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î! üåüüîÆ
pub fn variadic_macros_examples() {
    println!("\nüåüüìù === ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Variadic Macros - ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î! === üìùüåü");
    println!("ü™Ñ ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î! ‚ú®");

    // üì¶ Macro ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á vector - ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á! üéí‚ú®
    macro_rules! vec_of {
        ($($x:expr),*) => {
            {
                vec![$($x),*]  // ü™Ñ ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏™‡πà‡∏Å‡∏•‡πà‡∏≠‡∏á!
            }
        };
    }

    let numbers = vec_of![1, 2, 3, 4, 5];                    // üî¢ ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç!
    let words = vec_of!["hello", "world", "rust"];          // üìù ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏Ñ‡∏≥!

    println!("\nüì¶üî¢ === ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏° === üî¢üì¶");
    println!("üìä Vector ‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå: {numbers:?} üéØ");
    println!("üìä Vector ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå: {words:?} üéØ");

    // üìú Macro ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö print ‡∏´‡∏•‡∏≤‡∏¢‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î - ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠! üìö‚ú®
    macro_rules! print_lines {
        ($($line:expr),*) => {
            $(
                println!("üìÑ‚ú® {}", $line);  // ü™Ñ ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏û‡∏¥‡∏°‡∏û‡πå‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î!
            )*
        };
    }

    println!("\nüìúüìö === ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ === üìöüìú");
    print_lines!("üìñ ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏ó‡∏µ‡πà 1", "üìñ ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏ó‡∏µ‡πà 2", "üìñ ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏ó‡∏µ‡πà 3");
    println!("üéâ ‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå‡∏û‡∏¥‡∏°‡∏û‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ü™Ñ");
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_calculate_macro() {
        macro_rules! calculate {
            ($x:expr, +, $y:expr) => {
                $x + $y
            };
            ($x:expr, *, $y:expr) => {
                $x * $y
            };
        }

        assert_eq!(calculate!(5, +, 3), 8);
        assert_eq!(calculate!(4, *, 6), 24);
    }

    #[test]
    fn test_vec_macro() {
        macro_rules! vec_of {
            ($($x:expr),*) => {
                {
                    vec![$($x),*]
                }
            };
        }

        let numbers = vec_of![1, 2, 3];
        assert_eq!(numbers, vec![1, 2, 3]);
    }

    #[test]
    fn test_declarative_macros() {
        // ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà panic
        declarative_macros_examples();
        variadic_macros_examples();
    }
}