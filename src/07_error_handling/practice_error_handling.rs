/// à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸¶à¸à¸à¸™ Error Handling - à¸¢à¸´à¸¡à¸à¸¶à¸à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”! ğŸ’ªğŸ‹ï¸â€â™‚ï¸
/// à¸¡à¸²à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¹ƒà¸™ Rust à¸à¸±à¸™à¹€à¸–à¸­à¸°! (à¹€à¸•à¸£à¸µà¸¢à¸¡à¸•à¸±à¸§à¹ƒà¸«à¹‰à¸à¸£à¹‰à¸­à¸¡! ğŸš€)
/// 
/// à¹ƒà¸Šà¹‰ #[`allow(clippy::too_many_lines)`] à¹€à¸à¸£à¸²à¸°à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸™à¸µà¹‰à¹€à¸›à¹‡à¸™à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸à¸²à¸£à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰
/// à¸—à¸µà¹ˆà¸„à¸£à¸­à¸šà¸„à¸¥à¸¸à¸¡à¸«à¸¥à¸²à¸¢à¹à¸™à¸§à¸„à¸´à¸”à¸‚à¸­à¸‡ Error Handling à¹ƒà¸™à¹„à¸Ÿà¸¥à¹Œà¹€à¸”à¸µà¸¢à¸§ à¹€à¸à¸·à¹ˆà¸­à¸„à¸§à¸²à¸¡à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸—à¸µà¹ˆà¸•à¹ˆà¸­à¹€à¸™à¸·à¹ˆà¸­à¸‡ (à¸¢à¸²à¸§à¹à¸•à¹ˆà¸„à¸¸à¹‰à¸¡à¸„à¹ˆà¸²! ğŸ“š)
#[allow(clippy::too_many_lines)]
pub fn practice_error_handling() {
    println!("\nğŸ’ª === à¹à¸šà¸šà¸à¸¶à¸à¸«à¸±à¸” Error Handling: à¸¢à¸´à¸¡à¸à¸¶à¸à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”! === ğŸ’ª");

    // 1. File Reader Simulator - à¸ˆà¸³à¸¥à¸­à¸‡à¸à¸²à¸£à¸­à¹ˆà¸²à¸™à¹„à¸Ÿà¸¥à¹Œà¹à¸šà¸šà¸¡à¸µà¸­à¸²à¸£à¸¡à¸“à¹Œ! ğŸ“ğŸ˜„
    #[derive(Debug)]
    enum FileError {
        NotFound,           // à¸«à¸²à¹„à¸¡à¹ˆà¹€à¸ˆà¸­ (à¸«à¸²à¸¢à¹„à¸›à¹„à¸«à¸™à¸™à¸°? ğŸ¤”)
        PermissionDenied,   // à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸£à¸±à¸šà¸­à¸™à¸¸à¸à¸²à¸• (à¸«à¹‰à¸²à¸¡à¹€à¸‚à¹‰à¸²! ğŸš«)
        InvalidFormat,      // à¸£à¸¹à¸›à¹à¸šà¸šà¸œà¸´à¸” (à¸­à¸°à¹„à¸£à¸™à¸µà¹ˆ? ğŸ¤¨)
    }

    impl std::fmt::Display for FileError {
        fn fmt(&self, f: &mut std::fmt::Formatter) -> std::fmt::Result {
            match self {
                Self::NotFound => write!(f, "à¹„à¸¡à¹ˆà¸à¸šà¹„à¸Ÿà¸¥à¹Œ (à¸«à¸²à¸¢à¹„à¸›à¹„à¸«à¸™à¹à¸¥à¹‰à¸§? ğŸ‘»)"),
                Self::PermissionDenied => write!(f, "à¹„à¸¡à¹ˆà¸¡à¸µà¸ªà¸´à¸—à¸˜à¸´à¹Œà¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡à¹„à¸Ÿà¸¥à¹Œ (à¸«à¹‰à¸²à¸¡à¹€à¸‚à¹‰à¸²! ğŸš«ğŸ”’)"),
                Self::InvalidFormat => write!(f, "à¸£à¸¹à¸›à¹à¸šà¸šà¹„à¸Ÿà¸¥à¹Œà¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ (à¸­à¸°à¹„à¸£à¸™à¸µà¹ˆà¹€à¸™à¸µà¹ˆà¸¢? ğŸ¤¨ğŸ“„)"),
            }
        }
    }

    fn read_file_simulator(filename: &str) -> Result<String, FileError> {
        match filename {
            "config.txt" => Ok(String::from("port=8080\nhost=localhost")),  // à¹„à¸Ÿà¸¥à¹Œ config à¸›à¸à¸•à¸´! âœ…
            "secret.txt" => Err(FileError::PermissionDenied),  // à¸¥à¸±à¸šà¸ªà¸¸à¸”à¸¢à¸­à¸”! à¸«à¹‰à¸²à¸¡à¸”à¸¹! ğŸ”
            "data.json" => Ok(String::from("{\"name\": \"Rust\", \"version\": \"1.0\"}")),  // JSON à¸ªà¸§à¸¢à¹†! ğŸ“Š
            "corrupted.bin" => Err(FileError::InvalidFormat),  // à¹„à¸Ÿà¸¥à¹Œà¹€à¸ªà¸µà¸¢! ğŸ’¥
            _ => Err(FileError::NotFound),  // à¹„à¸¡à¹ˆà¸£à¸¹à¹‰à¸ˆà¸±à¸à¹„à¸Ÿà¸¥à¹Œà¸™à¸µà¹‰! ğŸ¤·â€â™‚ï¸
        }
    }

    println!("ğŸ“ === File Reader Simulator: à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸ˆà¸³à¸¥à¸­à¸‡à¸à¸²à¸£à¸­à¹ˆà¸²à¸™à¹„à¸Ÿà¸¥à¹Œ! === ğŸ“");

    let files = vec![
        "config.txt",
        "secret.txt",
        "data.json",
        "corrupted.bin",
        "missing.txt",
    ];

    for filename in files {
        match read_file_simulator(filename) {
            Ok(content) => println!("âœ… à¸­à¹ˆà¸²à¸™à¹„à¸Ÿà¸¥à¹Œ '{filename}' à¸ªà¸³à¹€à¸£à¹‡à¸ˆ: {content} (à¹€à¸¢à¸µà¹ˆà¸¢à¸¡! ğŸ‰)"),
            Err(error) => println!("âŒ à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸­à¹ˆà¸²à¸™à¹„à¸Ÿà¸¥à¹Œ '{filename}': {error} (à¸­à¸¸à¹Šà¸›à¸ªà¹Œ! ğŸ˜…)"),
        }
    }

    // 2. Calculator with Error Handling - à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸„à¸´à¸”à¹€à¸¥à¸‚à¸—à¸µà¹ˆà¸›à¸¥à¸­à¸”à¸ à¸±à¸¢! ğŸ§®ğŸ›¡ï¸
    #[derive(Debug)]
    enum CalculatorError {
        DivisionByZero,      // à¸«à¸²à¸£à¸”à¹‰à¸§à¸¢à¸¨à¸¹à¸™à¸¢à¹Œ (à¸«à¹‰à¸²à¸¡à¸—à¸³! ğŸš«)
        InvalidOperation,    // à¸à¸²à¸£à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£à¸œà¸´à¸” (à¹„à¸¡à¹ˆà¸£à¸¹à¹‰à¸ˆà¸±à¸à¸ªà¸±à¸à¸¥à¸±à¸à¸©à¸“à¹Œà¸™à¸µà¹‰! â“)
        Overflow,           // à¸•à¸±à¸§à¹€à¸¥à¸‚à¹ƒà¸«à¸à¹ˆà¹€à¸à¸´à¸™à¹„à¸› (à¸£à¸°à¹€à¸šà¸´à¸”! ğŸ’¥)
    }

    impl std::fmt::Display for CalculatorError {
        fn fmt(&self, f: &mut std::fmt::Formatter) -> std::fmt::Result {
            match self {
                Self::DivisionByZero => write!(f, "à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸«à¸²à¸£à¸”à¹‰à¸§à¸¢à¸¨à¸¹à¸™à¸¢à¹Œà¹„à¸”à¹‰ (à¸„à¸“à¸´à¸•à¸¨à¸²à¸ªà¸•à¸£à¹Œà¹„à¸¡à¹ˆà¸­à¸™à¸¸à¸à¸²à¸•! ğŸš«ğŸ“)"),
                Self::InvalidOperation => write!(f, "à¸à¸²à¸£à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ (à¹„à¸¡à¹ˆà¸£à¸¹à¹‰à¸ˆà¸±à¸à¸ªà¸±à¸à¸¥à¸±à¸à¸©à¸“à¹Œà¸™à¸µà¹‰! â“ğŸ¤”)"),
                Self::Overflow => write!(f, "à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œà¹€à¸à¸´à¸™à¸‚à¸µà¸”à¸ˆà¸³à¸à¸±à¸” (à¸•à¸±à¸§à¹€à¸¥à¸‚à¹ƒà¸«à¸à¹ˆà¹€à¸à¸´à¸™à¹„à¸›! ğŸ’¥ğŸ”¢)"),
            }
        }
    }

    fn safe_calculator(a: i32, b: i32, operation: &str) -> Result<i32, CalculatorError> {
        match operation {
            "+" => a.checked_add(b).ok_or(CalculatorError::Overflow),  // à¸šà¸§à¸à¸­à¸¢à¹ˆà¸²à¸‡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢! â•
            "-" => a.checked_sub(b).ok_or(CalculatorError::Overflow),  // à¸¥à¸šà¸­à¸¢à¹ˆà¸²à¸‡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢! â–
            "*" => a.checked_mul(b).ok_or(CalculatorError::Overflow),  // à¸„à¸¹à¸“à¸­à¸¢à¹ˆà¸²à¸‡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢! âœ–ï¸
            "/" => {
                if b == 0 {
                    Err(CalculatorError::DivisionByZero)  // à¸«à¸¢à¸¸à¸”! à¸«à¹‰à¸²à¸¡à¸«à¸²à¸£à¸”à¹‰à¸§à¸¢à¸¨à¸¹à¸™à¸¢à¹Œ! ğŸ›‘
                } else {
                    Ok(a / b)  // à¸«à¸²à¸£à¹„à¸”à¹‰! à¹€à¸¢à¹‰! â—
                }
            }
            _ => Err(CalculatorError::InvalidOperation),  // à¹„à¸¡à¹ˆà¸£à¸¹à¹‰à¸ˆà¸±à¸à¸ªà¸±à¸à¸¥à¸±à¸à¸©à¸“à¹Œà¸™à¸µà¹‰! ğŸ¤·â€â™‚ï¸
        }
    }

    println!("\nğŸ§® === Safe Calculator: à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸„à¸´à¸”à¹€à¸¥à¸‚à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢! === ğŸ§®");

    let calculations = vec![
        (10, 5, "+"),
        (10, 3, "-"),
        (6, 7, "*"),
        (15, 3, "/"),
        (10, 0, "/"),
        (i32::MAX, 1, "+"),
        (10, 5, "%"),
    ];

    for (a, b, op) in calculations {
        match safe_calculator(a, b, op) {
            Ok(result) => println!("âœ… {a} {op} {b} = {result} (à¸„à¸³à¸™à¸§à¸“à¹„à¸”à¹‰! ğŸ¯)"),
            Err(error) => println!("âŒ {a} {op} {b}: {error} (à¸­à¸¸à¹Šà¸›à¸ªà¹Œ! ğŸ˜…)"),
        }
    }

    // 3. Chain of Operations with Error Propagation - à¸ªà¸²à¸¢à¸à¸²à¸™à¸à¸²à¸£à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥! ğŸ­
    fn parse_and_double(input: &str) -> Result<i32, Box<dyn std::error::Error>> {
        let number = input.trim().parse::<i32>()?;  // à¹à¸›à¸¥à¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹€à¸›à¹‡à¸™à¸•à¸±à¸§à¹€à¸¥à¸‚ ğŸ”¢
        let doubled = number.checked_mul(2).ok_or("Overflow occurred")?;  // à¸„à¸¹à¸“à¸”à¹‰à¸§à¸¢ 2 à¸­à¸¢à¹ˆà¸²à¸‡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢! âœ–ï¸2
        Ok(doubled)  // à¸ªà¹ˆà¸‡à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œà¸à¸¥à¸±à¸š! ğŸ
    }

    fn process_numbers(inputs: Vec<&str>) -> Result<Vec<i32>, Box<dyn std::error::Error>> {
        let mut results = Vec::new();
        for input in inputs {
            let result = parse_and_double(input)?;  // à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥à¹à¸•à¹ˆà¸¥à¸°à¸•à¸±à¸§ (à¸–à¹‰à¸²à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¸ˆà¸°à¸«à¸¢à¸¸à¸”à¸—à¸±à¸™à¸—à¸µ! ğŸ›‘)
            results.push(result);  // à¹€à¸à¹‡à¸šà¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ ğŸ“¦
        }
        Ok(results)  // à¸ªà¹ˆà¸‡à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸à¸¥à¸±à¸š! ğŸ‰
    }

    println!("\nğŸ”— === Chain of Operations: à¸ªà¸²à¸¢à¸à¸²à¸™à¸à¸²à¸£à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥! === ğŸ”—");

    let good_inputs = vec!["5", "10", "15", "20"];  // à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸”à¸µà¹† à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”! âœ¨
    match process_numbers(good_inputs) {
        Ok(results) => println!("âœ… à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ: {results:?} (à¸ªà¸²à¸¢à¸à¸²à¸™à¸—à¸³à¸‡à¸²à¸™à¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢! ğŸ­âœ…)"),
        Err(error) => println!("âŒ à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”: {error} (à¹€à¸ªà¸µà¸¢à¹ƒà¸ˆà¸”à¹‰à¸§à¸¢ ğŸ˜”)"),
    }

    let bad_inputs = vec!["5", "abc", "15"];  // à¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸ªà¸µà¸¢à¸›à¸™à¸­à¸¢à¸¹à¹ˆ! ğŸ’¥
    match process_numbers(bad_inputs) {
        Ok(results) => println!("âœ… à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ: {results:?} (à¸ªà¸²à¸¢à¸à¸²à¸™à¸—à¸³à¸‡à¸²à¸™à¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢! ğŸ­âœ…)"),
        Err(error) => println!("âŒ à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”: {error} (à¸ªà¸²à¸¢à¸à¸²à¸™à¸«à¸¢à¸¸à¸”à¸—à¸³à¸‡à¸²à¸™! ğŸ­ğŸ›‘)"),
    }

    println!("\nğŸ‰ à¸ˆà¸šà¹à¸šà¸šà¸à¸¶à¸à¸«à¸±à¸” Error Handling! (à¹€à¸à¹ˆà¸‡à¸¡à¸²à¸! à¸œà¹ˆà¸²à¸™à¸à¸²à¸£à¸à¸¶à¸à¹à¸¥à¹‰à¸§! ğŸ’ªğŸ†)");
}
