/// à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¸­à¸™à¹€à¸£à¸·à¹ˆà¸­à¸‡ Static Lifetime - à¸”à¸´à¸™à¹à¸”à¸™à¹à¸«à¹ˆà¸‡à¸„à¸§à¸²à¸¡à¹€à¸›à¹‡à¸™à¸­à¸¡à¸•à¸°! âš°ï¸ğŸ‘»
/// à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸•à¸±à¸§à¹à¸›à¸£à¸—à¸µà¹ˆà¸¡à¸µà¸Šà¸µà¸§à¸´à¸•à¸™à¸´à¸£à¸±à¸™à¸”à¸£à¹Œ! ğŸ§›â€â™‚ï¸
pub fn learn_static_lifetime() {
    println!("\nâ™¾ï¸ === Static Lifetime: à¸”à¸´à¸™à¹à¸”à¸™à¹à¸«à¹ˆà¸‡à¸„à¸§à¸²à¸¡à¹€à¸›à¹‡à¸™à¸­à¸¡à¸•à¸°! === â™¾ï¸");

    // Static string literal - à¸ªà¸•à¸£à¸´à¸‡à¸­à¸¡à¸•à¸°! ğŸ§›â€â™‚ï¸ğŸ“œ
    let s: &'static str = "à¸‰à¸±à¸™à¸¡à¸µà¸­à¸²à¸¢à¸¸à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸•à¸¥à¸­à¸”à¹‚à¸›à¸£à¹à¸à¸£à¸¡ (à¹€à¸«à¸¡à¸·à¸­à¸™à¹à¸§à¸¡à¹„à¸à¸£à¹Œà¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸•à¸²à¸¢!)";
    println!("ğŸ“ Static string (à¸ªà¸•à¸£à¸´à¸‡à¸­à¸¡à¸•à¸°): {s}");

    // Static variable - à¸•à¸±à¸§à¹à¸›à¸£à¹‚à¸¥à¸à¸²à¸ à¸´à¸§à¸±à¸•à¸™à¹Œ! ğŸŒğŸ‘‘
    static GLOBAL_MESSAGE: &str = "à¸™à¸µà¹ˆà¸„à¸·à¸­à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡ global (à¹€à¸«à¸¡à¸·à¸­à¸™à¸›à¸£à¸°à¸à¸²à¸¨à¸‚à¸­à¸‡à¸à¸©à¸±à¸•à¸£à¸´à¸¢à¹Œà¸—à¸µà¹ˆà¸—à¸±à¹ˆà¸§à¹‚à¸¥à¸à¹„à¸”à¹‰à¸¢à¸´à¸™!)";
    println!("ğŸŒ Global message (à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹‚à¸¥à¸à¸²à¸ à¸´à¸§à¸±à¸•à¸™à¹Œ): {GLOBAL_MESSAGE}");

    // à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸—à¸µà¹ˆ return static reference - à¹‚à¸£à¸‡à¸‡à¸²à¸™à¸œà¸¥à¸´à¸•à¸„à¸§à¸²à¸¡à¹€à¸›à¹‡à¸™à¸­à¸¡à¸•à¸°! ğŸ­âš°ï¸
    const fn get_static_str() -> &'static str {
        "à¸ªà¸•à¸£à¸´à¸‡à¸—à¸µà¹ˆà¸¡à¸µ static lifetime (à¸œà¸¥à¸´à¸•à¸ à¸±à¸“à¸‘à¹Œà¸ˆà¸²à¸à¹‚à¸£à¸‡à¸‡à¸²à¸™à¸­à¸¡à¸•à¸°!)"
    }

    println!("ğŸ”„ à¸ˆà¸²à¸à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™: {}", get_static_str());

    // Struct à¸à¸±à¸š static lifetime - à¸à¸´à¸à¸´à¸˜à¸ à¸±à¸“à¸‘à¹Œà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸­à¸¡à¸•à¸°! ğŸ›ï¸ğŸ“š
    #[derive(Debug)]
    struct Config {
        name: &'static str,        // à¸Šà¸·à¹ˆà¸­à¸—à¸µà¹ˆà¸ˆà¸²à¸£à¸¶à¸à¹ƒà¸™à¸«à¸´à¸™!
        version: &'static str,     // à¹€à¸§à¸­à¸£à¹Œà¸Šà¸±à¸™à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹à¸›à¸¥à¸‡!
        description: &'static str, // à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢à¸™à¸´à¸£à¸±à¸™à¸”à¸£à¹Œ!
    }

    const APP_CONFIG: Config = Config {
        name: "RustApp",
        version: "1.0.0",
        description: "à¹à¸­à¸›à¸à¸¥à¸´à¹€à¸„à¸Šà¸±à¸™ Rust à¸—à¸µà¹ˆà¸¢à¸­à¸”à¹€à¸¢à¸µà¹ˆà¸¢à¸¡",
    };

    println!("\nâš™ï¸ === à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¹à¸­à¸›: à¸à¸´à¸à¸´à¸˜à¸ à¸±à¸“à¸‘à¹Œà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸­à¸¡à¸•à¸°! === âš™ï¸");
    println!("ğŸ“± à¸Šà¸·à¹ˆà¸­à¹à¸­à¸›: {}", APP_CONFIG.name);
    println!("ğŸ”¢ à¹€à¸§à¸­à¸£à¹Œà¸Šà¸±à¸™: {}", APP_CONFIG.version);
    println!("ğŸ“„ à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢: {}", APP_CONFIG.description);

    // à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£ static lifetime - à¸•à¸¹à¹‰à¹€à¸‹à¸Ÿà¹à¸«à¹ˆà¸‡à¸™à¸´à¸£à¸±à¸™à¸”à¸£à¹Œ! ğŸ”ğŸ’
    fn store_important_message(msg: &'static str) -> &'static str {
        // à¹ƒà¸™à¸„à¸§à¸²à¸¡à¹€à¸›à¹‡à¸™à¸ˆà¸£à¸´à¸‡ à¹€à¸£à¸²à¸­à¸²à¸ˆà¹€à¸à¹‡à¸šà¹„à¸§à¹‰à¹ƒà¸™ static variable
        // à¹€à¸«à¸¡à¸·à¸­à¸™à¹€à¸à¹‡à¸šà¸ªà¸¡à¸šà¸±à¸•à¸´à¹ƒà¸™à¸•à¸¹à¹‰à¹€à¸‹à¸Ÿà¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸¡à¸µà¸§à¸±à¸™à¹€à¸›à¸´à¸”!
        println!("ğŸ’¾ à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸ªà¸³à¸„à¸±à¸à¹ƒà¸™à¸•à¸¹à¹‰à¹€à¸‹à¸Ÿà¸™à¸´à¸£à¸±à¸™à¸”à¸£à¹Œ: {msg}");
        msg
    }

    let important = store_important_message("à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸—à¸µà¹ˆà¸ªà¸³à¸„à¸±à¸à¸¡à¸²à¸");
    println!("ğŸ“‹ à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸—à¸µà¹ˆà¹€à¸à¹‡à¸šà¹„à¸§à¹‰: {important}");

    // à¸à¸²à¸£à¹ƒà¸Šà¹‰ Box::leak à¹€à¸à¸·à¹ˆà¸­à¸ªà¸£à¹‰à¸²à¸‡ static lifetime (à¹ƒà¸Šà¹‰à¸­à¸¢à¹ˆà¸²à¸‡à¸£à¸°à¸§à¸±à¸‡!) - à¹€à¸§à¸—à¸¡à¸™à¸•à¸£à¹Œà¸”à¸³! ğŸ§™â€â™‚ï¸ğŸ’€
    let dynamic_string = String::from("à¸ªà¸•à¸£à¸´à¸‡à¸—à¸µà¹ˆà¸ªà¸£à¹‰à¸²à¸‡à¸‚à¸¶à¹‰à¸™à¹à¸šà¸š dynamic");
    let leaked_string: &'static str = Box::leak(dynamic_string.into_boxed_str());
    println!("\nâš ï¸ === Box::leak (à¹€à¸§à¸—à¸¡à¸™à¸•à¸£à¹Œà¸”à¸³ - à¹ƒà¸Šà¹‰à¸­à¸¢à¹ˆà¸²à¸‡à¸£à¸°à¸§à¸±à¸‡!) === âš ï¸");
    println!("ğŸ”“ Leaked string (à¸ªà¸•à¸£à¸´à¸‡à¸—à¸µà¹ˆà¸«à¸¥à¸¸à¸”à¸­à¸­à¸à¸¡à¸²): {leaked_string}");
    println!("âš ï¸ à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸: Box::leak à¸ˆà¸°à¸—à¸³à¹ƒà¸«à¹‰ memory à¹„à¸¡à¹ˆà¸–à¸¹à¸ deallocate! (à¹€à¸«à¸¡à¸·à¸­à¸™à¸ªà¸²à¸›à¹ƒà¸«à¹‰à¹€à¸›à¹‡à¸™à¸‹à¸­à¸¡à¸šà¸µà¹‰!)");

    // Lazy static pattern (à¸ˆà¸³à¸¥à¸­à¸‡) - à¸„à¸™à¸‚à¸µà¹‰à¹€à¸à¸µà¸¢à¸ˆà¸—à¸µà¹ˆà¹€à¸›à¹‡à¸™à¸­à¸¡à¸•à¸°! ğŸ˜´â™¾ï¸
    struct LazyStatic {
        data: &'static str,  // à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¸‚à¸µà¹‰à¹€à¸à¸µà¸¢à¸ˆà¹‚à¸«à¸¥à¸” (à¹à¸•à¹ˆà¹€à¸›à¹‡à¸™à¸­à¸¡à¸•à¸°!)
    }

    impl LazyStatic {
        const fn new() -> Self {
            Self {
                data: "à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¹‚à¸«à¸¥à¸”à¹à¸šà¸š lazy (à¹€à¸«à¸¡à¸·à¸­à¸™à¸„à¸™à¸‚à¸µà¹‰à¹€à¸à¸µà¸¢à¸ˆà¸—à¸µà¹ˆà¸•à¸·à¹ˆà¸™à¸ªà¸²à¸¢!)",
            }
        }

        const fn get_data(&self) -> &'static str {
            self.data
        }
    }

    static LAZY_DATA: LazyStatic = LazyStatic::new();

    println!("\nğŸ”„ === Lazy Static Pattern: à¸„à¸™à¸‚à¸µà¹‰à¹€à¸à¸µà¸¢à¸ˆà¸­à¸¡à¸•à¸°! === ğŸ”„");
    println!("ğŸ“Š à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ lazy (à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸‚à¸µà¹‰à¹€à¸à¸µà¸¢à¸ˆ): {}", LAZY_DATA.get_data());
}
